<!DOCTYPE html>
<html lang="en">

<head><%- include('../partials/head.ejs', {title: " - Personal Register" })%>
<script src="/js/userRegister.js"></script></head>


<body>
  <%- include('../partials/header.ejs')%>
  <div class=".container">
    <div class="row justify-content-center bt-3">
      <div class="col-md-10 mt-3">
        <h2>Formulario de registro</h2>

        <form action="/personal/register" method="POST" enctype="multipart/form-data" class="row g-3 needs-validation" novalidate >
      
            <div class="col-md-4 mt-3">
              <div class="form-group">
                <label for="name" class="form-label"><b>Nombre completo:</b></label>
                <input type="text" id="name" name="name" class="form-control
                <%= locals.errors && errors.name ? "is-invalid" : null %> name"
                  value="<%= locals.oldData ? oldData.name : null %>" />
                  <% if(locals.errors && errors.name) { %>
                <div class="name "><%= errors.name.msg %></div>
                <% } %>
              </div>
            </div>

            <div class="col-md-5 mt-3">
              <div class="form-group">
                <label for="email" class="form-label"><b>Correo electrónico:</b></label>
                <input type="text" id="email" name="email" class="form-control
                <%= locals.errors && errors.email ? "is-invalid" : null %> email"
                  value="<%= locals.oldData ? oldData.email : null %>" />
                  <%if(locals.errors && errors.email) { %>
                <div class="email "><%= errors.email.msg %></div>
                <% } %>
              </div>
            </div>

            <div class="col-md-3 mt-3">
              <div class="form-group">
                <label for="rol" class="form-label"><b>Rol:</b></label>

                <select name="rol" id="rol" class="form-control <%=
                  locals.errors && errors.rol ? "is-invalid" : null %>">
                  <option value="sinAsignar" <%= locals.oldData && oldData.rol === "sinAsignar" ? "selected" : " " ; %>>
                    Elige uno:</option>
                  <% for (let i = 0; i < roles.length; i++) { %>
                  <option value="<%= roles[i] %>"
                    <%= locals.oldData && oldData.rol === roles[i] ? "selected" : " " ; %>> <%= roles[i] %> </option>

                  <% } %>

                </select>

              </div>
            </div>

            <div class="col-md-3 mt-3">
              <div class="form-group">
                <label for="seniority"><b>Seniority:</b></label>

                <select name="seniority" id="seniority" class="form-control <%=
                  locals.errors && errors.seniority ? "is-invalid" : null %>">
                  <option value="sinAsignar"
                    <%= locals.oldData && oldData.seniority === "sinAsignar" ? "selected" : " " ; %>>
                    Elige uno:</option>
                  <% for (let i = 0; i < seniority.length; i++) { %>
                  <option value="<%= seniority[i] %>"
                    <%= locals.oldData && oldData.seniority === seniority[i] ? "selected" : " " ; %>>
                    <%= seniority[i] %> </option>

                  <% } %>

                </select>

              </div>
            </div>

             <div class="col-md-5 mt-3">
              <div class="form-group">
                <label for="avatar"><b>Imagen de Perfil:</b></label>
                <input type="file" id="avatar" name="avatar" class="form-control <%= locals.errors && errors.avatar ?
                  "is-invalid" : null %> image" /> <% if (locals.errors &&
                  errors.avatar) { %>
                <div class="image"><%= errors.avatar.msg %></div>
                <% } %>
              </div>
            </div>

            <div class="col-md-2 mt-3">
              <div class="form-group">
                <label for="password"><b>Contraseña:</b></label>
                <input type="password" id="password" name="password" class="form-control <%= locals.errors && errors.password ?
                  "is-invalid" : null %> password" /> <% if (locals.errors &&
                  errors.password) { %>
                <div class="password"><%= errors.password.msg %></div>
                <% } %>
              </div>
            </div>

            <div class="col-md-2 mt-3">
              <div class="form-group">
                <label for="repeatPassword"><b>Repetir Contraseña:</b></label>
                <input type="password" id="repeatPassword" name="repeatPassword" class="form-control <%= locals.errors &&
                  errors.repeatPassword ? "is-invalid" : null %> repeatPassword" /> <% if
                  (locals.errors && errors.repeatPassword) { %>
                <div class="repeatPassword">
                  <%= errors.repeatPassword.msg %>
                </div>
                <% } %>
              </div>
            </div>
            
           

            <div class="col-md-12 mt-3">
              <div class="form-group">
                <div><label class="form-check-label"><b>Proyectos involucrado:</b></label></div>
                <div class="list-proyects">
                <% for (let i = 0; i < datosProyectos.length; i++) { %>

                <a href="/proyectos/detail/<%= datosProyectos[i].id %>" class="list-group-item list-group-item-action proyects <%= [i] % 2 == 0 ? "par" : "impar" %>"
                  target="_blank" rel="nooper noreferrer">
                  <input type="checkbox" name="proyects" class="form-check-input"
                    value="<%= datosProyectos[i]._id  %>" />
                  <%= datosProyectos[i].name %>
                </a>

                <% } %>
                </div>
              </div>
            </div>
          
          <br />
          <div class="buttonPanel">
            <a href="/personal" class="btn btn-primary">Volver</a>
            <button type="submit" class="btn btn-success register">Registrarse</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
</body>

</html>